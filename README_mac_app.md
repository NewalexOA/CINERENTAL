# Руководство по использованию Mac-приложения для запуска CINERENTAL

## Общая информация

Приложение `start_cinerental.app` представляет собой macOS-утилиту для удобного запуска CINERENTAL в production режиме.
Оно разработано с использованием AppleScript и обеспечивает графический интерфейс для запуска основного скрипта `start_production.sh`.

## Принцип работы

1. Приложение отображает диалоговое окно для подтверждения запуска
2. После подтверждения, запускает `start_production.sh` в фоновом режиме
3. Создает лог операций в директории `/Users/anaskin/Github/CINERENTAL/logs/`
4. Отображает уведомление о начале запуска и инструкции пользователю
5. Автоматически открывает браузер, когда приложение полностью загружено

## Перенос приложения

### Вариант 1: Перенос только приложения (не рекомендуется)

Если вы переместите только AppleScript-приложение без файла `start_production.sh`:

- Приложение **не будет работать**, так как оно ищет `start_production.sh` в той же директории
- При запуске будет выдавать ошибку "Файл start_production.sh не найден"

### Вариант 2: Перенос приложения вместе со скриптом

Если вы переместите приложение **вместе с файлом** `start_production.sh`:

1. Скопируйте оба файла в новую директорию
2. Убедитесь, что скрипт имеет права на выполнение:
   ```bash
   chmod +x /новый/путь/start_production.sh
   ```
3. Приложение будет работать корректно

### Вариант 3: Модификация скрипта (рекомендуется)

Самый удобный способ — установить жесткий путь к скрипту запуска:

1. Откройте приложение в Script Editor:
   - Щелкните правой кнопкой мыши → Show Package Contents
   - Перейдите в Contents → Resources → Scripts → main.scpt

2. Замените строку:
   ```applescript
   set scriptPath to appPath & "start_production.sh"
   ```
   На:
   ```applescript
   set scriptPath to "/Users/anaskin/Github/CINERENTAL/start_production.sh"
   ```

3. Сохраните файл (Command+S)

После этой модификации приложение можно поместить в любую директорию (даже в Dock или Applications), и оно всегда будет запускать скрипт из репозитория проекта.

### Вариант 4: Создание ярлыка (самый безопасный)

Вместо переноса самого приложения, вы можете создать ярлык (alias):

1. Выберите приложение
2. Нажмите Command+L или выберите в меню File → Make Alias
3. Перенесите созданный ярлык в нужное место (например, на рабочий стол)

Этот вариант самый безопасный, так как оригинальное приложение остается на месте и продолжает корректно работать.

## Решение проблем

### Если приложение не запускается:

1. Проверьте, что Docker Desktop установлен и запущен
2. Убедитесь, что скрипт `start_production.sh` находится в ожидаемом месте и имеет права на выполнение
3. Проверьте лог-файл: `/Users/anaskin/Github/CINERENTAL/logs/cinerental_startup.log`

### Если кодировка текста отображается некорректно:

Если вы видите кракозябры вместо русского текста в Script Editor, создайте скрипт с помощью терминала:

```bash
cat > /tmp/start_cinerental.applescript << 'EOF'
-- Скрипт для запуска CINERENTAL
-- ... остальной код ...
EOF

osacompile -o ~/Desktop/StartCinerental.app /tmp/start_cinerental.applescript
```

## Дополнительная информация

- Приложение создаёт временные файлы в директории `/tmp/` для запуска скрипта
- Все логи сохраняются в `/Users/anaskin/Github/CINERENTAL/logs/`
- Для остановки CINERENTAL используйте команду `docker compose down`
