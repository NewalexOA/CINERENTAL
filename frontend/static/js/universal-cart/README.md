# Universal Cart - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
frontend/static/js/universal-cart/
‚îú‚îÄ‚îÄ index.js                    # üöÄ –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ cart-ui.js                  # üéõÔ∏è –ì–ª–∞–≤–Ω—ã–π UI –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ core/                       # üèóÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ universal-cart.js       # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫–æ—Ä–∑–∏–Ω—ã (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ cart-storage.js         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ ui/                         # üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ cart-templates.js       # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ cart-renderer.js        # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ cart-dialogs.js         # –ú–æ–¥–∞–ª—å–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ handlers/                   # ‚ö° –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ cart-event-handler.js   # –°–æ–±—ã—Ç–∏—è –∫–æ—Ä–∑–∏–Ω—ã –∏ UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
‚îú‚îÄ‚îÄ config/                     # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ cart-configs.js         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∫–æ—Ä–∑–∏–Ω
‚îú‚îÄ‚îÄ integration/                # üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ cart-integration.js     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å project-equipment
‚îî‚îÄ‚îÄ tests/                      # üß™ –¢–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ unit/
    ‚îú‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ e2e/
```

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### ‚úÖ –ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ

1. **Single Responsibility Principle** - –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **Dependency Injection** - –º–æ–¥—É–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
3. **Separation of Concerns** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, UI –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
4. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–º–µ–Ω—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏
5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### üéØ Responsibilities (–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π)

#### üèóÔ∏è **Core Modules**

- **UniversalCart** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
- **CartStorage** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage

#### üé® **UI Modules**

- **CartUI** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è UI, –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- **CartTemplates** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HTML —à–∞–±–ª–æ–Ω–æ–≤
- **CartRenderer** - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI
- **CartDialogs** - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### ‚ö° **Event Handling**

- **CartEventHandler** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π UI –∏ –∫–æ—Ä–∑–∏–Ω—ã

#### ‚öôÔ∏è **Configuration & Integration**

- **cart-configs.js** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ—Ä–∑–∏–Ω
- **cart-integration.js** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
document.addEventListener('universalCartReady', async () => {
    // –°–æ–∑–¥–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    const cart = new UniversalCart('equipment', {
        maxItems: 50,
        autoSave: true
    });

    // –°–æ–∑–¥–∞–µ–º UI
    const cartUI = new CartUI(cart, {
        position: 'right',
        showCostInfo: true,
        animations: true
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
    await cartUI.init();

    // –ö–æ—Ä–∑–∏–Ω–∞ –≥–æ—Ç–æ–≤–∞!
    console.log('Universal Cart initialized!');
});
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

```javascript
// –î–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
cart.addItem({
    id: 123,
    name: 'Canon EOS R5',
    barcode: 'CAM001',
    category: '–ö–∞–º–µ—Ä—ã',
    serial_number: 'R5001',
    daily_cost: 2500,
    replacement_cost: 350000
});
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```javascript
// –°–ª—É—à–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
document.addEventListener('cart:primaryAction', (e) => {
    const cartData = e.detail;
    // –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –≤ –ø—Ä–æ–µ–∫—Ç
    addToProject(cartData.items);
});
```

## üîß API Reference

### CartUI Methods

- `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI
- `show()` - –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É
- `hide()` - —Å–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
- `toggle()` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å
- `render()` - –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å UI
- `showConfirmDialog(options)` - –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `showLoadingDialog(message)` - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
- `destroy()` - –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã

### CartRenderer Methods

- `renderItem(item)` - —Ä–µ–Ω–¥–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ—Ä–∑–∏–Ω—ã
- `updateSummary(summaryElement)` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–¥–∫—É
- `updateBadge(badgeElement)` - –æ–±–Ω–æ–≤–∏—Ç—å –±–µ–π–¥–∂
- `updateItemsList(itemsListElement)` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
- `trackActivity(type, itemName)` - –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### CartEventHandler Methods

- `setupEventListeners(container, toggleButton)` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
- `cleanup()` - –æ—á–∏—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

- **cart-ui.js**: 1291 —Å—Ç—Ä–æ–∫–∞ (43KB) - –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è - –≤—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è - —Å–ª–æ–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É
- **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

- **CartUI**: 384 —Å—Ç—Ä–æ–∫–∏ (10KB) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
- **CartRenderer**: 220 —Å—Ç—Ä–æ–∫ (8KB) - —Ç–æ–ª—å–∫–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- **CartEventHandler**: 380 —Å—Ç—Ä–æ–∫ (13KB) - —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è
- **CartDialogs**: 350 —Å—Ç—Ä–æ–∫ (12KB) - —Ç–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–∏
- **CartTemplates**: 363 —Å—Ç—Ä–æ–∫–∏ (15KB) - —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω—ã

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ **–°–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ú–æ–¥—É–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –ü—Ä–∏–º–µ—Ä unit —Ç–µ—Å—Ç–∞ –¥–ª—è CartRenderer
describe('CartRenderer', () => {
    let cart, templates, renderer;

    beforeEach(() => {
        cart = new UniversalCart('test');
        templates = new CartTemplates();
        renderer = new CartRenderer(cart, templates);
    });

    it('should render item correctly', () => {
        const item = { id: 1, name: 'Test Item' };
        const html = renderer.renderItem(item);
        expect(html).toContain('Test Item');
    });
});
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é:

```javascript
// –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
const cartUI = new CartUI(cart);

// –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±
const cartUI = new CartUI(cart, {
    showCostInfo: true,
    animations: true
});
await cartUI.init();
```

## üìà –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

1. **Lazy Loading** - –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
2. **Web Components** - –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –≤–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. **TypeScript** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
4. **–ú–∏–∫—Ä–æ—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –º–æ–¥—É–ª—è
5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

---

**–ê–≤—Ç–æ—Ä**: ACT-Rental Team
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-12-21
**–í–µ—Ä—Å–∏—è**: 2.0.0 (Modular Architecture)
